<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Solo Controller: Electronics Design</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Solo Controller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2david_2_documents_2_platform_i_o_2_solo___controller_2_solo___controller___repo_2docs_2_electronics___design.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Electronics Design</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3"></a></p>
<ul>
<li>Electronics Design<ul>
<li>Electronics Components<ul>
<li>Mega 2560, Rev 3 Microcontroller</li>
<li>7 inch 1024x600 TFT Touch Display Module</li>
<li>RA8875 Display Interface Card</li>
<li>Solo Controller Interface Board</li>
</ul>
</li>
<li>Physical Layout of Electronics</li>
<li>Design Considerations<ul>
<li>Where the data is stored and how used</li>
<li>Maximizing use of graphics chip</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The electrical components of the Solo BIAB Controller are split between two enclosures: Display and <a class="el" href="class_sensor.html" title="Abstract class that acts as an interface for all sensor classes.">Sensor</a> Breakout Enclosure. The 1024x600 pixel touch screen and associated control electronics are all contained within the Display Enclosure. There are four primary components to the control electronics that interface as shown in the following figure.</p>
<center><img src="Microcontroller_Design.png" alt="Microcontroller Architecture" width="90%" class="inline"/></center><p>This section focuses on the design of the control electronics. Circuit diagrams showing the full wiring of the Display enclosure can be found <a href="https://dvititoe.github.io/Solo_Controller/html/md__c_1_2_users_2david_2_documents_2_platform_i_o_2_solo___controller_2_solo___controller___repoce64a9c6d48faf017579aaf4a589827a.html"><em><b>here</b></em></a>.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Electronics Components</h1>
<p>The four components that make up the control electronics are as follows:</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Mega 2560, Rev 3 Microcontroller</h2>
<p>The Arduino Mega 2560, Rev 3 microcontroller is the "brains" for the control electronics. The software loaded onto the microcontroller is <a href="https://dvititoe.github.io/Solo_Controller/html/hierarchy.html">here</a>. Documentation describing the software architecture is <a href="https://dvititoe.github.io/Solo_Controller/html/md__c_1_2_users_2david_2_documents_2_platform_i_o_2_solo___controller_2_solo___controller___repo924c0276cea6a76d1a32c52e45cff1ce.html">here</a>.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
7 inch 1024x600 TFT Touch Display Module</h2>
<p>The Solo Controller uses a 7 inch, 1024x600 pixel TFT display from <a href="https://www.buydisplay.com/">BuyDisplay.com</a>. Model <a href="https://dvititoe.github.io/Solo_Controller/html/docs/ER-TFT070A2-6-5633_Datasheet.pdf">ER-TFT070A2-6-5633</a> was selected. This display has built in Capacitance Touch Panel (CTP) capability. Information about the CTP capability can be found in the <a href="https://dvititoe.github.io/Solo_Controller/html/docs/FT5316.pdf">CTP Datasheet</a> and the <a href="https://dvititoe.github.io/Solo_Controller/html/docs/FT5x16_registers.pdf">CTP Data Register</a> documentation.</p>
<center><img src="TFT_Display.png" alt="TFT Display" width="90%" class="inline"/></center><p>The display has a built in MicroSD Card Interface, which is not used by the Solo Controller. It can also be upgraded, by soldering a 128M bit (SOP8) ROM chip to the board. This gives more than enough non-volatile storage capacity to hold the imagery used by the Solo Controller software. Finally, the display includes a <a href="https://dvititoe.github.io/Solo_Controller/html/docs/LT7683.pdf">LT7683</a> graphics chip. the LT7683 has 128Mb of built in RAM. This chip provides the graphics engine that drives the Solo Controller user interface.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
RA8875 Display Interface Card</h2>
<p>We use the ER-AS-RA8875 display adapter from <a href="https://www.buydisplay.com/">BuyDisplay.com</a> to drive the TFT. The ER-AS-RA8875 has the same pin configuration as the Mega 2560 microcontroller. So, it is designed to plug in to the mega as a Top-hat card. The microcontroller communicates with the TFT display via a 4-pin SPI interface. The SPI signals are sent to the ER-AS-RA8875 via the Mega pins. The interface card then translates this into the format required by the TFT, communicating via a 40-pin ribbon cable.</p>
<center><img src="ER-AS_RA8875_Interface_Board.png" alt="RA8875 Display Interface Board" width="90%" class="inline"/></center><p>It is important to note that the TFT requires about 1A of current at 5V. The power regulator on the Mega 2560 doesn't have enough capacity to provide this. Therefore, external power must be provided to the ER-AS-RA8875. The interface board used for this project has a 3.5x1.35mm DC barrel connector. The 5W of power that is needed is provided by the Solo Controller Interface Board, described below. A short cable is run from the JST power connector on the Solo Controller Interface Board to the DC connector on the ER-AS-RA8875.</p>
<p>Further documentation on the ER-AS-RA8875 can be found <a href="https://dvititoe.github.io/Solo_Controller/html/docs/ER-AS-RA8875_Datasheet.pdf">here</a> and <a href="https://dvititoe.github.io/Solo_Controller/html/docs/ER-TFT070A2-6-5633_Datasheet.pdf">here</a>.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Solo Controller Interface Board</h2>
<p>The Solo Controller Interface Board is a custom board, created for the Solo Controller. This board serves a number of roles:</p>
<ul>
<li>Converts 24v power to the 5V needed by the electronics.</li>
<li>Provides screw terminals that give easy access to the microcontroller pins that control the pump, element, alarm, etc.</li>
<li>Interlock circuit to ensure the element is placed in the "off" position before enabling the heating element. This ensures their is positive control of the heating element during system boot up.</li>
<li>Startup circuit that manages the graceful power on of the TFT and ER-AS-RA8875 display interface board.</li>
</ul>
<center><img src="Controller_Board_Render-Front.png" alt="Solo Controller Interface Board" width="90%" class="inline"/></center><p>Detailed information can be found on the <a href="https://dvititoe.github.io/Solo_Controller/html/md__c_1_2_users_2david_2_documents_2_platform_i_o_2_solo___controller_2_solo___controller___repof324f8aea4f8d2fafe41560af30afc02.html">Controller Interlace Board</a> page.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Physical Layout of Electronics</h1>
<p>The following pictures show the physical layout of the electronics components: </p><center><img src="Electronics_Physical_Layout.png" alt="Solo Controller Interface Board" width="90%" class="inline"/></center><h1><a class="anchor" id="autotoc_md10"></a>
Design Considerations</h1>
<p>The SPI interface between the Mega 2560 and the LT7683 graphics chip on the TFT is very slow. It can take as much as 5 seconds to transfer a 12-bit color, 1024x600 pixel image from the microcontroller to the LT7683. This is far too slow to be useful for the Solo Controller User Interface. Therefore, the microcontroller is only used to send commands to the LT7683. Images are not sent across this interface.</p>
<p>Instead, we use one of the following two methods to display imagery on the TFT</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Where the data is stored and how used</h2>
<p><em>Coming soon... Discuss how images are pre-loaded into the ROM on the TFT. Commands sent to the LT7683 can transfer the images from ROM into RAM. Once in RAM, the images can either be displayed or manipulated via the Bit Transfer Engine provided by the LT7683.</em></p>
<p><em>Talk about where menu images are stored. 12-bit format</em></p>
<p><em>Talk about where fonts are stored. talk about format. provide link to more information about font handling.</em></p>
<h2><a class="anchor" id="autotoc_md12"></a>
Maximizing use of graphics chip</h2>
<p><em>Coming soon... Talk about the use of native graphics capabilities of the LT7683. This can be used to quickly draw lines, rectangles, ellipses, etc. Describe how this is used in conjunction with the menu graphics.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
