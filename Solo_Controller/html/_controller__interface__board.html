<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Solo Controller: Controller Interface Board</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Solo Controller<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Documentation for the Solo Controller</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_controller__interface__board.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Controller Interface Board</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__controller___interface___board"></a></p>
<p>The Controller Interface board acts as an interface between the Mega 2560 microcontroller and the RA8875 Display Interface card, providing the custom features needed to implement Solo Controller functionality.</p>
<p>The Controller Interface Board was designed in KiCad 9.0. The circuit diagram and PCB layout can be found in the <a href="https://github.com/DVititoe/Solo_Controller/tree/main/Kicad/Controller_Board">Solo Controller Github</a> repository. An interactive BOM, showing the layout of PCB components can be found <a href="https://dvititoe.github.io/Solo_Controller/html/BOM/Controller_Board_BOM.html">here</a>.</p>
<center><img src="Controller_Board_Render-Front.png" alt="Controller Interface PCB front view." width="80%" class="inline"/> </center><h1><a class="anchor" id="autotoc_md3"></a>
Key Features</h1>
<p>Some of the key features of the card include:</p>
<ul>
<li>Interface for the RTD temperature probes</li>
<li>Interface for the Volume sensor probe</li>
<li>Display startup/reset circuit to ensure proper startup of the TFT</li>
<li>Element Interlock circuit</li>
<li>Interface to the Controller's alarm</li>
<li><a class="el" href="namespace_buzzer.html">Buzzer</a> to provide audio feedback.</li>
<li>Output for Brew Pump, Element SSR, and Aux</li>
</ul>
<p>Since this card is intended as a prototype card, a number of additional features have been added to help prototype and debug new features. This includes:</p>
<ul>
<li>LEDs to indicate when various components are active</li>
<li>Prototype board for additional components</li>
<li>Access to power: 3.3v, 5v, and 24v</li>
<li>Access to available Mega 2560 pins/.</li>
</ul>
<p>Future, production version of this board may remove these additional features.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Board Pinout</h1>
<h1><a class="anchor" id="autotoc_md5"></a>
Circuit Diagram</h1>
<p>The following is the primary circuit diagram for the Solo Controller Interface Board. Note that there are two sub-diagrams shown here: CTP Reset Circuit and the Power Interlock circuit. Diagrams for these circuits are below.</p>
<center><img src="Controller_Board_Schematic.png" alt="Controller Interface Circuit" width="80%" class="inline"/></center><h2><a class="anchor" id="autotoc_md6"></a>
CTP Reset Circuit</h2>
<p>The <a href="https://dvititoe.github.io/Solo_Controller/html/docs/FT5316.pdf">Capacitance Touch Panel</a> (CTP) circuit provided by the <a href="https://dvititoe.github.io/Solo_Controller/html/docs/ER-TFT070A2-6-5633_Datasheet.pdf">ER-TFT070A2-6-5633</a> display, has specific power on requirements. In particular, the TFT reset pin must remain grounded during power up. Once the power is stable, the reset pin can be allowed to float, which returns it to 5v. This enables the TFT, making it ready for successful operation. Failure to do this will can place the CTP module into a bad state.</p>
<p>The CTP Reset Circuit uses a 555 timing chip to ground the reset pin during system power up. ONce the microcontroller has completed it's startup, it briefly pulses the A0 pin high (5v) before returning it to ground. This triggers the 555 timing chip, latching the CTP in the enabled state.</p>
<p>The reset pin in this circuit is tied to a momentary button in the Display Enclosure. If this button is pressed, reset is grounded. When this happens, the microcontroller reboots and the CTP Reset Circuit disables (grounds) the CTP reset. As described above, once the microcontroller completes its boot sequence, the TFT is enabled.</p>
<center><img src="Controller_Board_Reset_Circuit.png" alt="Controller Interface Circuit" width="80%" class="inline"/></center><h2><a class="anchor" id="autotoc_md7"></a>
Element Interlock Circuit</h2>
<p>The Solo Controller has an Element Enable switch designed to enable/disable the heating element within the kettle. The Element Interlock circuit ensures there we always have full control of the heating element during system startup. Should the Element Enable switch be 'on' during system power up, the 'input' pin in the Element Interlock circuit will be set to 24v. This sets 'Interlock_Status' to 0v, disabling the element. Should this happen, the buzzer will turn on, giving the users an audible indication of the error condition.</p>
<p>Placing the Element Enable switch into the 'off' position, forces 'input' to be 0v. This action latches 'Interlock_Status' at 5v, which enables the contactor for the element.</p>
<center><img src="Controller_Board_Interlock_Circuit.png" alt="Controller Interface Circuit" width="80%" class="inline"/></center><h1><a class="anchor" id="autotoc_md8"></a>
Circuit Board Layout</h1>
<p>The circuit board layout is provided here for completeness. For additional information, place refer to the <a href="https://github.com/DVititoe/Solo_Controller/tree/main/Kicad/Controller_Board">KiCad model</a>.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Front of PCB</h2>
<center><img src="Controller_Board_PCB-Front.png" alt="Controller Interface PCB" width="80%" class="inline"/></center><h2><a class="anchor" id="autotoc_md10"></a>
Back of PCB</h2>
<center><img src="Controller_Board_PCB-Back.png" alt="Controller Interface PCB" width="80%" class="inline"/></center> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
